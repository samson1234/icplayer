(function(e){var b={validateBoolean:function(a){return"True"===a},validateInteger:function(a){var d={isValid:!1,value:NaN};if(b.isStringEmpty(a))return d;a=parseInt(a,10);if(isNaN(a))return d;d.isValid=!0;d.value=a;return d},validatePositiveInteger:function(a){a=this.validateInteger(a);return!a.isValid?a:1>a.value?{isValid:!1}:a},validateIntegerInRange:function(a,b,c){a=this.validateInteger(a);if(!a.isValid)return a;c||(c=0);return a.value<c||a.value>b?{isValid:!1}:a},validateFloat:function(a,d){var c=
{isValid:!1,value:NaN,parsedValue:NaN};if(b.isStringEmpty(a))return c;var e=parseFloat(a);if(isNaN(e))return c;d||(d=2);c.isValid=!0;c.value=e.toFixed(d);c.parsedValue=parseFloat(c.value);return c},validateFloatInRange:function(a,b,c,e){e||(e=2);a=this.validateFloat(a,e);if(!a.isValid)return a;c||(c=0);c=parseFloat(c.toFixed(e));b=parseFloat(b.toFixed(e));return a.value<c||a.value>b?{isValid:!1}:a},validateOption:function(a,b){for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)&&c===b)return a[c];
return a[a.DEFAULT]},validateColor:function(a,b){b||(b="#FFFFFF");if(!a)return{isValid:!1,color:b};var c=a.match(/#[0-9a-fA-F]+/),e;return(e=(e=!c||null===c||1!=c.length)||7!=c[0].length)?{isValid:!1,color:b}:{isValid:!0,color:a}},isStringEmpty:function(a){return void 0===a||""===a},isStringWithPrefixEmpty:function(a,d){return b.isStringEmpty(a)?!0:a===d},isArrayElementEmpty:function(a){if(!a)return!0;for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)&&!b.isStringEmpty(a[d]))return!1;return!0},
isArrayEmpty:function(a){return!a?!0:1===a.length&&b.isArrayElementEmpty(a[0])},removeDuplicatesFromArray:function(a){if(0===a.length)return[];for(var b=[],c=0;c<a.length-1;c++)a[c+1]!==a[c]&&b.push(a[c]);b.push(a[a.length-1]);return b}};e.ModelValidationUtils=b})(window);(function(e){e.LoadingScreen={screens:[],create:function(b){if(b){var b=$(b),a=b.width(),d=b.height(),c=Math.floor(1E3*Math.random())+"-"+Math.floor(1E3*Math.random()),e=$(document.createElement("img"));e.attr({src:"http://www.lorepo.com/media/images/loading.gif",alt:"Loading...",id:c,position:"absolute",display:"none",border:0,padding:0,margin:0});b.append(e);e.show();e.css({top:(d-e.height())/2+"px",left:(a-e.width())/2+"px"}).hide();this.screens.push({id:c,$element:e,counter:0});return c}},getScreen:function(b){for(var a=
0,d=this.screens.length;a<d;a++)if(this.screens[a].id===b)return a;return-1},show:function(b){b=this.getScreen(b);-1!==b&&(this.screens[b].counter++,this.screens[b].$element.show())},hide:function(b){b=this.getScreen(b);-1!==b&&(0<this.screens[b].counter&&this.screens[b].counter--,0===this.screens[b].counter&&this.screens[b].$element.hide())}}})(window);(function(e){e.DOMOperationsUtils={getOuterDimensions:function(b){b=$(b);return{border:{top:parseInt(b.css("border-top-width"),10),bottom:parseInt(b.css("border-bottom-width"),10),left:parseInt(b.css("border-left-width"),10),right:parseInt(b.css("border-right-width"),10)},margin:{top:parseInt(b.css("margin-top"),10),bottom:parseInt(b.css("margin-bottom"),10),left:parseInt(b.css("margin-left"),10),right:parseInt(b.css("margin-right"),10)},padding:{top:parseInt(b.css("padding-top"),10),bottom:parseInt(b.css("padding-bottom"),
10),left:parseInt(b.css("padding-left"),10),right:parseInt(b.css("padding-right"),10)}}},calculateOuterDistances:function(b){var a=b.border.top+b.border.bottom,a=a+(b.margin.top+b.margin.bottom),a=a+(b.padding.top+b.padding.bottom),d=b.border.left+b.border.right,d=d+(b.margin.left+b.margin.right),d=d+(b.padding.left+b.padding.right);return{vertical:a,horizontal:d}},calculateReducedSize:function(b,a){var d=DOMOperationsUtils.getOuterDimensions(a),d=DOMOperationsUtils.calculateOuterDistances(d);return{width:$(b).width()-
d.horizontal,height:$(b).height()-d.vertical}},setReducedSize:function(b,a){var d=DOMOperationsUtils.calculateReducedSize(b,a);$(a).css({width:d.width+"px",height:d.height+"px"});return d},showErrorMessage:function(b,a,d){$(b).html(a[d])},getResourceFullPath:function(b,a){return!b||!a?void 0:b.getStaticFilesPath()+a}}})(window);(function(e){e.Serialization={serialize:function(b){if(b){var a="";$.each(b,function(b,c){var e=typeof c;if("object"===e&&$.isArray(c)){var e="array",f="";$.each(c,function(a){f+=this+"-"+typeof c[a]+","});c=f=f.slice(0,-1)}a+="["+b+":"+e+":"+c+"]"});return a}},deserialize:function(b){if(b){var a={};if(b=b.match(/[\w]+:[\w-]+:[\w,.\- ]+/g)){for(var d=0;d<b.length;d++){var c=b[d].split(":");a[c[0]]=this.convert(c[2],c[1])}return a}}},convert:function(b,a){if(b&&a)switch(a){case "string":return b;case "number":return this.isInteger(b)?
parseInt(b):parseFloat(b);case "boolean":return"true"==b;case "array":return this.convertArray(b);default:return"This type of value is unrecognized."}},convertArray:function(b){for(var b=b.split(","),a=[],d=0;d<b.length;d++){var c=b[d].split("-");a.push(this.convert(c[0].trim(),c[1]))}return a},isInteger:function(b){return 0===b%1&&null!=b}}})(window);(function(e){e.Watermark={defaultOptions:{size:100,opacity:1,color:"#000000"},validateOptions:function(b){if(!b)return $.extend({},this.defaultOptions);var a=$.extend({},b);ModelValidationUtils.validatePositiveInteger(b.size).isValid||(a.size=this.defaultOptions.size);ModelValidationUtils.validateFloatInRange(b.opacity,1,0,2).isValid||(a.opacity=this.defaultOptions.opacity);ModelValidationUtils.validateColor(b.color,this.defaultOptions.color).isValid||(a.color=this.defaultOptions.color);return a},
draw:function(b,a){var d=$(b),c=$(document.createElement("canvas"));d.html(c);a=this.validateOptions(a);c.attr({width:a.size,height:a.size});c.rotateCanvas({x:a.size/2,y:a.size/2,angle:90}).drawArc({strokeWidth:1,strokeStyle:a.color,fillStyle:a.color,x:a.size/2,y:a.size/2,radius:a.size/2-1,opacity:a.opacity}).drawLine({strokeWidth:1,strokeStyle:"#FFF",fillStyle:"#FFF",rounded:!0,x1:a.size/2,y1:0.17*a.size,x2:a.size-0.2*a.size,y2:a.size-0.33*a.size,x3:0.2*a.size,y3:a.size-0.33*a.size,x4:a.size/2,y4:0.17*
a.size,opacity:a.opacity})}}})(window);(function(e){e.Helpers={splitLines:function(b){return b.split(/[\n\r]+/)},alertErrorMessage:function(b,a){var d=a+"\n\n";b.name&&(d+="["+b.name+"] ");d+=b.message?b.message:b;alert(d)}}})(window);(function(e){var b={};e.MobileUtils={isMobileUserAgent:function(a){return void 0===a||!a?!1:a.match(/Android/i)||a.match(/BlackBerry/i)||a.match(/iPhone|iPad|iPod/i)||a.match(/IEMobile/i)||a.match(/Opera Mini/i)?!0:!1},isAndroidWebBrowser:function(a){return void 0===a||!a?!1:a.indexOf("Mozilla/5.0">-1&&-1<a.indexOf("Android ")&&-1<a.indexOf("AppleWebKit"))&&!(-1<a.indexOf("Chrome"))},getAndroidVersion:function(a){if(void 0===a||!a)return"";var a=a.toString(),b=a.indexOf("Android")+7;if(-1===b)return"";
var c=a.indexOf(";",b);return a.substring(b,c).trim()},isSafariMobile:function(a){return void 0===a||!a?!1:a.match(/iPhone|iPad|iPod/i)?!0:!1},isWindowsMobile:function(a){return void 0===a||!a?!1:a.msPointerEnabled?!0:!1},isEventSupported:function(a){var d={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img",unload:"win",resize:"win"},c=a.replace(/^on/,"");if(b[c])return b[c];var d="win"==d[c]?e:document.createElement(d[c]||"div"),a="on"+c,h=a in d;h||(d.setAttribute(a,
"return;"),h="function"==typeof d[a]);return b[c]=h}}})(window);(function(e){e.Commands={dispatch:function(b,a,d,c){var e,f;for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&f.toLowerCase()===a&&b[f]&&(e=b[f].call(c,d));return e}};e.CommandsQueueFactory={create:function(b){return new e.CommandsQueue(b)}};e.CommandsQueueTask=function(b,a){this.name=b;this.params=a};e.CommandsQueue=function(b){this.module=b;this.queue=[]};e.CommandsQueue.prototype.addTask=function(b,a){var d=new e.CommandsQueueTask(b,a);this.queue.push(d)};e.CommandsQueue.prototype.getTask=
function(){return this.isQueueEmpty()?null:this.queue.splice(0,1)[0]};e.CommandsQueue.prototype.getAllTasks=function(){return this.queue};e.CommandsQueue.prototype.executeTask=function(){var b=this.getTask();b&&this.module.executeCommand(b.name.toLowerCase(),b.params)};e.CommandsQueue.prototype.executeAllTasks=function(){for(;!this.isQueueEmpty();)this.executeTask()};e.CommandsQueue.prototype.getTasksCount=function(){return this.queue.length};e.CommandsQueue.prototype.isQueueEmpty=function(){return 0===
this.queue.length}})(window);(function(e){e.ImageViewer={validateSound:function(b){var a=[];if(b&&$.isArray(b))for(var d=0;d<b.length;d++){var c=ModelValidationUtils.isStringWithPrefixEmpty(b[d]["MP3 sound"],"/file/"),e=ModelValidationUtils.isStringWithPrefixEmpty(b[d]["AAC sound"],"/file/"),f=ModelValidationUtils.isStringWithPrefixEmpty(b[d]["OGG sound"],"/file/");a.push({AAC:e?"":b[d]["AAC sound"],OGG:f?"":b[d]["OGG sound"],MP3:c?"":b[d]["MP3 sound"],isEmpty:c&&e&&f})}return{sounds:a}},loadSounds:function(b,a){var d=[];if(!buzz.isSupported()||
!b||!a)return d;for(var c=0;c<a;c++)c>b.length-1||b[c].isEmpty?d[c]=null:(d[c]=""!==b[c].MP3&&buzz.isMP3Supported()?new buzz.sound(b[c].MP3):""!==b[c].OGG&&buzz.isOGGSupported()?new buzz.sound(b[c].OGG):new buzz.sound(b[c].AAC),d[c].load());return d},convertFramesList:function(b,a,d){if(ModelValidationUtils.isStringEmpty(b))return{isError:!0,errorCode:"FL01"};var c=b.match(/[0-9a-zA-Z,-]+/);if(null===c||b.length!==c[0].length)return{isError:!0,errorCode:"FL02"};for(var c=[],b=b.split(","),e=0;e<b.length;e++){if(ModelValidationUtils.isStringEmpty(b[e]))return{isError:!0,
errorCode:"FL04"};if(-1!==b[e].search("-")){var f=b[e].split("-")[1],g=ModelValidationUtils.validateIntegerInRange(f,d,a);if(!g.isValid)return{isError:!0,errorCode:"FL05"};var i=b[e].split("-")[0],f=ModelValidationUtils.validateIntegerInRange(i,f.value,a);if(!f.isValid||f.value>g.value)return{isError:!0,errorCode:"FL05"};for(f=f.value;f<=g.value;f++)c.push(f)}else{g=ModelValidationUtils.validateIntegerInRange(b[e],d,a);if(!g.isValid)return{isError:!0,errorCode:"FL03"};c.push(g.value)}}c.sort();c=
ModelValidationUtils.removeDuplicatesFromArray(c);return{isError:!1,list:c}}}})(window);(function(e){e.StringUtils={replaceAll:function(b,a,d){a=a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return b.replace(RegExp(a,"g"),d)},startsWith:function(b,a){return b.match("^"+a)==a},endsWith:function(b,a){return-1!==b.indexOf(a,b.length-a.length)}}})(window);(function(e){e.TextParserProxy=function(b){if(null==b)return null;this.parser=b};e.TextParserProxy.prototype.parse=function(b){b=this.parser.parse(b);return StringUtils.replaceAll(b,"href='#'",'href="javascript:void(0)"')};e.TextParserProxy.prototype.connectLinks=function(b){return this.parser.connectLinks(b)};e.TextParserProxy.prototype.parseGaps=function(b,a){"undefined"==typeof a&&(a={isCaseSensitive:!1});return this.parser.parseGaps(b,a)}})(window);(function(e){e.Internationalization={EASTERN_ARABIC:"ea",WESTERN_ARABIC:"wa",PERSO_ARABIC:"pa",getNumericals:function(b){var a={};a[e.Internationalization.WESTERN_ARABIC]={"0":"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"};a[e.Internationalization.EASTERN_ARABIC]={"0":"&#x0660",1:"&#x0661",2:"&#x0662",3:"&#x0663",4:"&#x0664",5:"&#x0665",6:"&#x0666",7:"&#x0667",8:"&#x0668",9:"&#x0669"};a[e.Internationalization.PERSO_ARABIC]={"0":"&#x06F0",1:"&#x06F1",2:"&#x06F2",3:"&#x06F3",4:"&#x06F4",
5:"&#x06F5",6:"&#x06F6",7:"&#x06F7",8:"&#x06F8",9:"&#x06F9"};return b in a?a[b]:a[e.Internationalization.WESTERN_ARABIC]},translate:function(b,a){for(var d=b.toString(),c="",h=e.Internationalization.getNumericals(a),f=0;f<d.length;f++)c+=h[+d.charAt(f)];return c}}})(window);(function(e){e.LoadedPromise=function(b,a){var d=[];$.each(a,function(a){var e=new $.Deferred,f=e.promise();b[a+"LoadedDeferred"]=e;b[a+"Loaded"]=f;d.push(f);b.getLoadedPromise=function(){var a=new $.Deferred,b=function(c,d){d==c.length?a.resolve():$.when(c[d]).then(function(){b(c,d+1)})};b(d,0);return a.promise()}})}})(window);
/**
 * Player Addons Commons library
 * @version 1.9.8
 * Components:
 * - Model Validation Utils
 * - Loading Screen
 * - DOM Operations
 * - States Serialization
 * - Watermark
 * - Commands
 * - Image Viewer (partial)
 * - Helpers
 * - Mobile Utils
 * - String Utils
 * - Internationalization
 * - Text Parser Proxy
 * - Loaded Promise
 */